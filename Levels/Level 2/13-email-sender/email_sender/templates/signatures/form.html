{% extends "base.html" %}

{% block title %}{{ 'Edit' if signature else 'New' }} Signature{% endblock %}

{% block extra_css %}
        .container { max-width: 800px; }
        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        .checkbox-group input { width: auto; }
        .checkbox-group label { margin: 0; }
        .form-actions {
            display: flex;
            gap: 1rem;
            margin-top: 2rem;
        }
{% endblock %}

{% block content %}
        <a href="{{ url_for('list_signatures') }}" class="back-link">‚Üê Back to Signatures</a>
        <h1 style="margin: 1rem 0 2rem;">{{ 'Edit' if signature else 'New' }} Email Signature</h1>

        <div class="card">
            <div class="card-body" style="padding: 30px;">
                <form method="POST">
                    <div class="form-group">
                        <label for="name">Signature Name *</label>
                        <input type="text" id="name" name="name" required
                               value="{{ signature.name if signature else '' }}"
                               placeholder="e.g., Professional, Casual, Marketing">
                    </div>

                    <div class="form-group">
                        <label for="content">Plain Text Signature *</label>
                        <textarea id="content" name="content" required
                                  placeholder="--&#10;John Doe&#10;Senior Developer&#10;john@example.com">{{ signature.content if signature else '' }}</textarea>
                        <p class="help-text">This will be used for plain text emails.</p>
                    </div>

                    <div class="form-group">
                        <label for="html_content">HTML Signature (optional)</label>
                        <textarea id="html_content" name="html_content"
                                  placeholder="&lt;div style='color: #666;'&gt;&#10;  &lt;p&gt;--&lt;/p&gt;&#10;  &lt;p&gt;&lt;strong&gt;John Doe&lt;/strong&gt;&lt;/p&gt;&#10;  &lt;p&gt;Senior Developer&lt;/p&gt;&#10;&lt;/div&gt;">{{ signature.html_content if signature else '' }}</textarea>
                        <p class="help-text">HTML version for rich email clients. Leave blank to use plain text.</p>
                    </div>

                    <div class="form-group">
                        <div class="checkbox-group">
                            <input type="checkbox" id="is_default" name="is_default"
                                   {% if signature and signature.is_default %}checked{% endif %}>
                            <label for="is_default">Set as default signature</label>
                        </div>
                    </div>

                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary">
                            {{ 'Update' if signature else 'Create' }} Signature
                        </button>
                        <a href="{{ url_for('list_signatures') }}" class="btn btn-secondary">Cancel</a>
                    </div>
                </form>
            </div>
        </div>
{% endblock %}
